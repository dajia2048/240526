---
title: 'Advent of Code 2023: Day Seven'
categories: ['RobbKnight']
keywords: ['RobbKnight']
date: 2023-12-07T15:45:19.743+00:00
lastmod: 2023-12-07T15:45:19.743+00:00
author: [['RobbKnight']]
tags: ['RobbKnight']
draft: false 
comments: true
reward: true 
mermaid: true 
showToc: true 
TocOpen: true 
hidemeta: false 
disableShare: true 
showbreadcrumbs: true 
cover:
    image: https://www.g0f.cn/img/banner.jpg
    alt: "'Advent of Code 2023: Day Seven'"
    relative: false
---

<div>

<p>Time to play some matches of legally-distinct-from-poker-and-easy-to-play-on-a-camel<sup class="footnote-ref"><a href="https://rknight.me/feed.xml#fn1" id="fnref1">[1]</a></sup> card game.</p>
<h3>Part One</h3>
<p>Each hand has five cards and a score:</p>
<pre class="language-bash"><code class="language-bash">32T3K <span class="token number">765</span><br/>T55J5 <span class="token number">684</span><br/>KK677 <span class="token number">28</span><br/>KTJJT <span class="token number">220</span><br/>QQQJA <span class="token number">483</span></code></pre>
<p>Each hand outranks others based on how many cards of each type it has, starting at five of a kind and ending with high card. Here's the array I was using to test out my hand rank calculator:</p>
<pre class="language-php"><code class="language-php"><span class="token variable">$scores</span> <span class="token operator">=</span> <span class="token punctuation">[</span><br/>    <span class="token string single-quoted-string">'AAAAA'</span><span class="token punctuation">,</span> <span class="token comment">// five of a kind / rank 7</span><br/>    <span class="token string single-quoted-string">'AA8AA'</span><span class="token punctuation">,</span> <span class="token comment">// four of a kind / rank 6</span><br/>    <span class="token string single-quoted-string">'23332'</span><span class="token punctuation">,</span> <span class="token comment">// full house / rank 5</span><br/>    <span class="token string single-quoted-string">'TTT98'</span><span class="token punctuation">,</span> <span class="token comment">// three of a kind / rank 4</span><br/>    <span class="token string single-quoted-string">'23432'</span><span class="token punctuation">,</span> <span class="token comment">// two pair / rank 3</span><br/>    <span class="token string single-quoted-string">'A23A4'</span><span class="token punctuation">,</span> <span class="token comment">// one pair / rank 2</span><br/>    <span class="token string single-quoted-string">'23456'</span> <span class="token comment">// high card / rank 1</span><br/><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre>
<p>All the hands need to be ordered by their rank and in the result of a tie, compare the hands's first value and if those are the same the second value, and so on. Some values are letters rather than numbers, and ace is high:</p>
<pre class="language-php"><code class="language-php"><span class="token variable">$highValues</span> <span class="token operator">=</span> <span class="token punctuation">[</span><br/>    <span class="token string single-quoted-string">'A'</span> <span class="token operator">=&gt;</span> <span class="token number">14</span><span class="token punctuation">,</span><br/>    <span class="token string single-quoted-string">'K'</span> <span class="token operator">=&gt;</span> <span class="token number">13</span><span class="token punctuation">,</span><br/>    <span class="token string single-quoted-string">'Q'</span> <span class="token operator">=&gt;</span> <span class="token number">12</span><span class="token punctuation">,</span><br/>    <span class="token string single-quoted-string">'J'</span> <span class="token operator">=&gt;</span> <span class="token number">11</span><span class="token punctuation">,</span><br/>    <span class="token string single-quoted-string">'T'</span> <span class="token operator">=&gt;</span> <span class="token number">10</span><span class="token punctuation">,</span><br/><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre>
<p>Once they've all been ranked, multiply that rank by the score and add them together to get the answer. The lowest rank is 1 and upwards to however many hands we have.</p>
<p>Like <a href="https://rknight.me/blog/tags/adventofcode/">previous days</a> PHP has some handy functions to make this easier. <a href="https://www.php.net/manual/en/function.count-chars.php"><code>count_chars</code></a> "counts the number of occurrences of every byte-value in a string". <a href="https://www.php.net/manual/en/function.chr.php"><code>chr</code></a> then converts that back to the number or letter:</p>
<pre class="language-php"><code class="language-php"><span class="token variable">$count</span> <span class="token operator">=</span> <span class="token function">count_chars</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'12344'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br/><br/><span class="token comment">// output</span><br/><span class="token punctuation">[</span><br/>	<span class="token number">49</span> <span class="token operator">=&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span><br/>	<span class="token number">50</span> <span class="token operator">=&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span><br/>	<span class="token number">51</span> <span class="token operator">=&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span><br/>	<span class="token number">52</span> <span class="token operator">=&gt;</span> <span class="token number">2</span><span class="token punctuation">,</span><br/><span class="token punctuation">]</span><br/><br/><span class="token function">chr</span><span class="token punctuation">(</span><span class="token number">52</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br/><span class="token comment">// 4</span></code></pre>
<p>Once I had my counts for each hands, I make this <code>calculateHandRank</code> function to return a rank between one and seven depending on the hand. Based on how many elements the array has (and the product in some cases) I can work out the rank easily. <a href="https://lewisdale.dev/post/advent-of-code-2023-day-seven/">Lewis has a more elegant solution</a> thay works when the counts are ordered but the result is the ultimately the same:</p>
<pre class="language-php"><code class="language-php"><span class="token keyword">function</span> <span class="token function-definition function">calculateHandRank</span><span class="token punctuation">(</span><span class="token variable">$counts</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><br/>    <span class="token variable">$count</span> <span class="token operator">=</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token variable">$counts</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br/>    <span class="token keyword">switch</span><span class="token punctuation">(</span><span class="token variable">$count</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><br/>        <span class="token keyword">case</span> <span class="token number">2</span><span class="token punctuation">:</span><br/>            <span class="token keyword">return</span> <span class="token function">array_product</span><span class="token punctuation">(</span><span class="token function">array_values</span><span class="token punctuation">(</span><span class="token variable">$counts</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">4</span> <span class="token operator">?</span> <span class="token number">6</span> <span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">;</span><br/>        <span class="token keyword">case</span> <span class="token number">3</span><span class="token punctuation">:</span><br/>            <span class="token keyword">return</span> <span class="token function">array_product</span><span class="token punctuation">(</span><span class="token function">array_values</span><span class="token punctuation">(</span><span class="token variable">$counts</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">3</span> <span class="token operator">?</span> <span class="token number">4</span> <span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">;</span><br/>        <span class="token keyword">case</span> <span class="token number">4</span><span class="token punctuation">:</span><br/>            <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span><br/>        <span class="token keyword">case</span> <span class="token number">5</span><span class="token punctuation">:</span><br/>            <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span><br/>        <span class="token keyword">default</span><span class="token punctuation">:</span><br/>            <span class="token keyword">return</span> <span class="token number">7</span><span class="token punctuation">;</span><br/>    <span class="token punctuation">&#125;</span><br/><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre>
<p>Part of ranking the hands is the tie-breaker I mentioned above, based on each card compared to the other hand. So if we had two hands that were both five of a kind, the first one would win because A (ace) is higher than Q (queen):</p>
<pre class="language-bash"><code class="language-bash"><span class="token string">'AAAAA'</span><br/><span class="token string">'QQQQQ'</span></code></pre>
<p>Here it us all together to get the answer for part one:</p>
<pre class="language-php"><code class="language-php"><span class="token comment">// extract the hands and scores, caclulate the hand types</span><br/><span class="token variable">$formatted</span> <span class="token operator">=</span> <span class="token function">array_map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$line</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><br/>    <span class="token punctuation">[</span><span class="token variable">$cards</span><span class="token punctuation">,</span> <span class="token variable">$score</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">explode</span><span class="token punctuation">(</span><span class="token string single-quoted-string">' '</span><span class="token punctuation">,</span> <span class="token variable">$line</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br/>    <span class="token variable">$score</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword type-casting">int</span><span class="token punctuation">)</span> <span class="token variable">$score</span><span class="token punctuation">;</span><br/>    <span class="token variable">$counts</span> <span class="token operator">=</span> <span class="token function">count_chars</span><span class="token punctuation">(</span><span class="token variable">$cards</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br/>    <span class="token variable">$cards</span> <span class="token operator">=</span> <span class="token function">str_split</span><span class="token punctuation">(</span><span class="token variable">$cards</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br/>    <span class="token variable">$handType</span> <span class="token operator">=</span> <span class="token function">calculateHandRank</span><span class="token punctuation">(</span><span class="token variable">$counts</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br/>    <span class="token keyword">return</span> <span class="token function">compact</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'cards'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'score'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'handType'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br/><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token variable">$lines</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br/><br/><span class="token comment">// sort the hands by type, compare the card values in the event of a tie break</span><br/><span class="token function">usort</span><span class="token punctuation">(</span><span class="token variable">$formatted</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$a</span><span class="token punctuation">,</span> <span class="token variable">$b</span><span class="token punctuation">)</span> <span class="token keyword">use</span> <span class="token punctuation">(</span><span class="token variable">$highValues</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><br/>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$a</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'handType'</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token variable">$b</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'handType'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><br/>        <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$a</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'cards'</span><span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token variable">$index</span> <span class="token operator">=&gt;</span> <span class="token variable">$aCard</span><span class="token punctuation">)</span><br/>        <span class="token punctuation">&#123;</span><br/>            <span class="token variable">$aCard</span> <span class="token operator">=</span> <span class="token variable">$highValues</span><span class="token punctuation">[</span><span class="token variable">$aCard</span><span class="token punctuation">]</span> <span class="token operator">??</span> <span class="token variable">$aCard</span><span class="token punctuation">;</span><br/>            <span class="token variable">$bCard</span> <span class="token operator">=</span> <span class="token variable">$b</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'cards'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token variable">$index</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br/>            <span class="token variable">$bCard</span> <span class="token operator">=</span> <span class="token variable">$highValues</span><span class="token punctuation">[</span><span class="token variable">$b</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'cards'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token variable">$index</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">??</span> <span class="token variable">$b</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'cards'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token variable">$index</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br/><br/>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$aCard</span> <span class="token operator">===</span> <span class="token variable">$bCard</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><br/>                <span class="token keyword">continue</span><span class="token punctuation">;</span><br/>            <span class="token punctuation">&#125;</span><br/><br/>            <span class="token keyword">return</span> <span class="token variable">$aCard</span> <span class="token operator">&gt;</span> <span class="token variable">$bCard</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><br/>        <span class="token punctuation">&#125;</span><br/>    <span class="token punctuation">&#125;</span><br/>    <span class="token keyword">return</span> <span class="token variable">$a</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'handType'</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token variable">$b</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'handType'</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><br/><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br/><br/><span class="token comment">// calculate the overall score </span><br/><span class="token variable">$score</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br/><br/><span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$formatted</span> <span class="token keyword">as</span> <span class="token variable">$index</span> <span class="token operator">=&gt;</span> <span class="token variable">$line</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><br/>    <span class="token variable">$score</span> <span class="token operator">+=</span> <span class="token variable">$line</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'score'</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token variable">$index</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br/><span class="token punctuation">&#125;</span><br/><br/><span class="token keyword">echo</span> <span class="token variable">$score</span> <span class="token operator">.</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">;</span></code></pre>
<h3>Part Two</h3>
<p>Part two introduced a fun twist. <code>J</code> is now a joker instead of the jack/11. In the event of a tie break, the joker is worth 1 but if it exists in a hand the it goes towards whichever grouping would increase the hands type. For example, this three of a kind hand becomes four of a kind:</p>
<pre class="language-php"><code class="language-php"><span class="token variable">$before</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'AAA5J'</span><span class="token punctuation">;</span> <span class="token comment">// three of a kind</span><br/><span class="token variable">$after</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'AAA5A'</span><span class="token punctuation">;</span> <span class="token comment">// four of a kind</span></code></pre>
<p>I updated my formatting code to account for, using <code>count_chars</code> to find which value the joker should become:</p>
<pre class="language-php"><code class="language-php"><span class="token variable">$formatted</span> <span class="token operator">=</span> <span class="token function">array_map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$line</span><span class="token punctuation">)</span> <span class="token keyword">use</span> <span class="token punctuation">(</span><span class="token variable">$highValues</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><br/>    <span class="token punctuation">[</span><span class="token variable">$cards</span><span class="token punctuation">,</span> <span class="token variable">$score</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">explode</span><span class="token punctuation">(</span><span class="token string single-quoted-string">' '</span><span class="token punctuation">,</span> <span class="token variable">$line</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br/>    <span class="token variable">$score</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword type-casting">int</span><span class="token punctuation">)</span> <span class="token variable">$score</span><span class="token punctuation">;</span><br/>    <span class="token variable">$counts</span> <span class="token operator">=</span> <span class="token function">count_chars</span><span class="token punctuation">(</span><span class="token variable">$cards</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br/>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">strpos</span><span class="token punctuation">(</span><span class="token variable">$cards</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'J'</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token constant boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><br/>        <span class="token comment">// get the highest grouping character</span><br/>        <span class="token variable">$highest</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br/>        <span class="token variable">$character</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">;</span><br/>        <span class="token variable">$index</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">;</span><br/>        <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$counts</span> <span class="token keyword">as</span> <span class="token variable">$char</span> <span class="token operator">=&gt;</span> <span class="token variable">$count</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><br/>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">chr</span><span class="token punctuation">(</span><span class="token variable">$char</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string single-quoted-string">'J'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><br/>                <span class="token keyword">continue</span><span class="token punctuation">;</span><br/>            <span class="token punctuation">&#125;</span><br/>            <span class="token variable">$fChar</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword type-casting">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token variable">$highValues</span><span class="token punctuation">[</span><span class="token function">chr</span><span class="token punctuation">(</span><span class="token variable">$char</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">??</span> <span class="token function">chr</span><span class="token punctuation">(</span><span class="token variable">$char</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br/>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$count</span> <span class="token operator">===</span> <span class="token variable">$highest</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><br/>                <span class="token comment">// compare the numbers/cards instead of the count</span><br/>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$fChar</span> <span class="token operator">&lt;</span> <span class="token variable">$character</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><br/>                    <span class="token keyword">continue</span><span class="token punctuation">;</span><br/>                <span class="token punctuation">&#125;</span><br/>                <span class="token variable">$highest</span> <span class="token operator">=</span> <span class="token variable">$count</span><span class="token punctuation">;</span><br/>                <span class="token variable">$character</span> <span class="token operator">=</span> <span class="token variable">$fChar</span><span class="token punctuation">;</span><br/>                <span class="token variable">$index</span> <span class="token operator">=</span> <span class="token variable">$char</span><span class="token punctuation">;</span><br/>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$count</span> <span class="token operator">&gt;</span> <span class="token variable">$highest</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><br/>                <span class="token variable">$highest</span> <span class="token operator">=</span> <span class="token variable">$count</span><span class="token punctuation">;</span><br/>                <span class="token variable">$character</span> <span class="token operator">=</span> <span class="token variable">$fChar</span><span class="token punctuation">;</span><br/>                <span class="token variable">$index</span> <span class="token operator">=</span> <span class="token variable">$char</span><span class="token punctuation">;</span><br/>            <span class="token punctuation">&#125;</span><br/>        <span class="token punctuation">&#125;</span><br/>        <span class="token variable">$newCards</span> <span class="token operator">=</span> <span class="token function">str_replace</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'J'</span><span class="token punctuation">,</span> <span class="token function">chr</span><span class="token punctuation">(</span><span class="token variable">$index</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token variable">$cards</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br/>        <span class="token variable">$counts</span> <span class="token operator">=</span> <span class="token function">count_chars</span><span class="token punctuation">(</span><span class="token variable">$newCards</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br/>    <span class="token punctuation">&#125;</span><br/>    <span class="token variable">$cards</span> <span class="token operator">=</span> <span class="token function">str_split</span><span class="token punctuation">(</span><span class="token variable">$cards</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br/>    <span class="token variable">$handType</span> <span class="token operator">=</span> <span class="token function">calculateHandRank</span><span class="token punctuation">(</span><span class="token variable">$counts</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br/>    <span class="token keyword">return</span> <span class="token function">compact</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'cards'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'score'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'handType'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br/><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token variable">$lines</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Finally, I swapped the <code>J</code> value for 1:</p>
<pre class="language-diff"><code class="language-diff">$highValues = [<br/><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    'J' =&gt; 11,<br/></span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    'J' =&gt; 1,<br/></span></span>];</code></pre>
<p>I ran the code and got a warning:</p>
<pre class="language-txt"><code class="language-txt">chr(): Passing null to parameter #1 ($codepoint) of type int is deprecated</code></pre>
<p>One of the edge cases (maybe the only one?) was a hand that was five of a kind of all <code>J</code> cards. I hadn't accounted for this in my new code for locating the joker replacement; I was skipping every card that was a <code>J</code> so it never the replacement index would be <code>null</code>. One more quick change and I had part two finished.</p>
<pre class="language-diff"><code class="language-diff"><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> $replace = $index ? chr($index) : 'A';<br/></span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> $newCards = str_replace('J', $chr($index), $cards);<br/></span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> $newCards = str_replace('J', $replace, $cards);</span></span></code></pre>
<p>This was a nice one today. Easy to understand but complicated enough to be a challenge.</p>
<p>My solution is <a href="https://github.com/rknightuk/adventofcode/tree/main/2023/07">on GitHub</a>.</p>
<hr class="footnotes-sep"/>
<section class="footnotes">
<ol class="footnotes-list">
<li class="footnote-item" id="fn1"><p>Told you the story was bonkers <a class="footnote-backref" href="https://rknight.me/feed.xml#fnref1">⤾</a></p>
</li>
</ol>
</section>

</div>

<div>
[原文](https://rknight.me/blog/advent-of-code-2023-day-seven/)
</div>

