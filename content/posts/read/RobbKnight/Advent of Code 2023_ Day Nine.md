---
title: 'Advent of Code 2023: Day Nine'
categories: ['RobbKnight']
date: 2023-12-09T13:10:04.340+00:00
lastmod: 2023-12-09T13:10:04.340+00:00
author: ["g0f"]
tags:
- read
draft: false 
comments: true
reward: true 
mermaid: true 
showToc: true 
TocOpen: true 
hidemeta: false 
disableShare: true 
showbreadcrumbs: true 
cover:
    image: "/hugo-logo-wide.svg"
    alt: 果粉圈
    relative: false
---

<div>

<h3>Part One</h3>
<p>Given this an input like this, find the next number in the sequence. See the <a href="https://adventofcode.com/2023/day/9">advent of code instructions</a> for more details, but we need to go from this:</p>
<pre class="language-text"><code class="language-text">0 3 6 9 12 15</code></pre>
<p>To the following, to get the final value for that row of <code>18</code>. To do this we take the first two numbers and get the difference between them. That becomes our first number on the second row. Continue this until the final row is all zeros. Then take the last digit all of the rows and sum them to get <code>18</code> (0 + 3 + 15).</p>
<pre class="language-text"><code class="language-text">0   3   6   9  12  15 -&gt; 18<br/>  3   3   3   3   3 -&gt; 3<br/>    0   0   0   0 -&gt; 0</code></pre>
<p>I interated over each line, used a while loop to check if the sum of the new row is more than zero, and continue adding rows until the new row's sum is zero (this assumption becomes important in a minute). Then grab all the final numbers and sum them for our row value, then sum all the lines to get the answer.</p>
<pre class="language-php"><code class="language-php"><span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$lines</span> <span class="token keyword">as</span> <span class="token variable">$line</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><br/>    <span class="token variable">$allNumbers</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br/>    <span class="token variable">$allNumbers</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">explode</span><span class="token punctuation">(</span><span class="token string single-quoted-string">' '</span><span class="token punctuation">,</span> <span class="token variable">$line</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br/>    <span class="token variable">$currentIndex</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br/>    <span class="token variable">$finalNumbers</span> <span class="token operator">=</span> <span class="token variable">$allNumbers</span><span class="token punctuation">[</span><span class="token function">array_key_last</span><span class="token punctuation">(</span><span class="token variable">$allNumbers</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br/>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">array_sum</span><span class="token punctuation">(</span><span class="token variable">$finalNumbers</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><br/>        <span class="token variable">$currentRow</span> <span class="token operator">=</span> <span class="token variable">$allNumbers</span><span class="token punctuation">[</span><span class="token variable">$currentIndex</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br/>        <span class="token variable">$new</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br/>        <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$currentRow</span> <span class="token keyword">as</span> <span class="token variable">$index</span> <span class="token operator">=&gt;</span> <span class="token variable">$number</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><br/>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$currentRow</span><span class="token punctuation">[</span><span class="token variable">$index</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><br/>                <span class="token variable">$allNumbers</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$new</span><span class="token punctuation">;</span><br/>                <span class="token variable">$finalNumbers</span> <span class="token operator">=</span> <span class="token variable">$allNumbers</span><span class="token punctuation">[</span><span class="token function">array_key_last</span><span class="token punctuation">(</span><span class="token variable">$allNumbers</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br/>                <span class="token keyword">continue</span><span class="token punctuation">;</span><br/>            <span class="token punctuation">&#125;</span><br/>            <span class="token variable">$new</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$currentRow</span><span class="token punctuation">[</span><span class="token variable">$index</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token variable">$number</span><span class="token punctuation">;</span><br/>        <span class="token punctuation">&#125;</span><br/>        <span class="token variable">$currentIndex</span><span class="token operator">++</span><span class="token punctuation">;</span><br/>    <span class="token punctuation">&#125;</span><br/><br/>    <span class="token variable">$finalValue</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br/><br/>    <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$allNumbers</span> <span class="token keyword">as</span> <span class="token variable">$numbers</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><br/>        <span class="token variable">$finalValue</span> <span class="token operator">+=</span> <span class="token variable">$numbers</span><span class="token punctuation">[</span><span class="token function">array_key_last</span><span class="token punctuation">(</span><span class="token variable">$numbers</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br/>    <span class="token punctuation">&#125;</span><br/><br/>    <span class="token variable">$total</span> <span class="token operator">+=</span> <span class="token variable">$finalValue</span><span class="token punctuation">;</span><br/><span class="token punctuation">&#125;</span><br/><br/><span class="token keyword">echo</span> <span class="token string double-quoted-string">"Total: <span class="token interpolation"><span class="token variable">$total</span></span>"</span> <span class="token operator">.</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">;</span></code></pre>
<p>This worked perfectly on the sample input but like other days the real input had a gotcha. As I noted above, I made the assumption that if the sum of a row was more than zero we should carry on but this doesn't account for negative numbers. What I <em>should</em> have done was check if the sum was not <em>exactly zero</em>:</p>
<pre class="language-diff"><code class="language-diff"><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> while (array_sum($finalNumbers) !== 0) &#123;<br/></span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> while (array_sum($finalNumbers) &gt; 0) &#123;</span></span></code></pre>
<p>That was part one done.</p>
<h3>Part Two</h3>
<p>Instead of calculating the <em>next</em> number we need to do the <em>previous</em> number from each sequence. All of my previous code for getting all the rows is the same, I just need to update my total calculator to generate the previous number for each row and get the previous number for the original sequence:</p>
<pre class="language-diff"><code class="language-diff"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> $finalValue = 0;<br/></span></span><br/><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> foreach ($allNumbers as $numbers) &#123;<br/></span><span class="token prefix deleted">-</span><span class="token line">    $finalValue += $numbers[array_key_last($numbers)];<br/></span><span class="token prefix deleted">-</span><span class="token line"> &#125;<br/></span></span><br/><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> $total += $finalValue;</span></span></code></pre>
<pre class="language-php"><code class="language-php"><span class="token variable">$next</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br/><span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token function">array_reverse</span><span class="token punctuation">(</span><span class="token variable">$allNumbers</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token variable">$index</span> <span class="token operator">=&gt;</span> <span class="token variable">$numbers</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><br/>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$index</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// skip the first row it's always zeros</span><br/>        <span class="token keyword">continue</span><span class="token punctuation">;</span><br/>    <span class="token punctuation">&#125;</span><br/><br/>    <span class="token variable">$first</span> <span class="token operator">=</span> <span class="token variable">$numbers</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br/>    <span class="token variable">$next</span> <span class="token operator">=</span> <span class="token variable">$first</span> <span class="token operator">-</span> <span class="token variable">$next</span><span class="token punctuation">;</span><br/><span class="token punctuation">&#125;</span><br/><br/><span class="token variable">$total</span> <span class="token operator">+=</span> <span class="token variable">$next</span><span class="token punctuation">;</span></code></pre>
<p>This was a nice one. Nothing too hard to understand from the instructions and totally doable without knowing a magic maths solution.</p>
<p>My solution is <a href="https://github.com/rknightuk/adventofcode/tree/main/2023/">on GitHub</a>.</p>

</div>

<div>
[原文](https://rknight.me/blog/advent-of-code-2023-day-nine/)
</div>

